# Дополнительные функции

# Функция ISNULL()

Функция `ISNULL()` используется для проверки значения на `NULL`. В качестве аргумента принимает произвольное значение и возвращает `1`, если переданным значением является `NULL`, или `0` в противном случае.

Результат запроса:

```
SELECT ISNULL(0),
       ISNULL(1),
       ISNULL(1.1),
       ISNULL(''),
       ISNULL('bee'),
       ISNULL(NULL);
```

будет:

```
+-----------+-----------+-------------+------------+---------------+--------------+
| ISNULL(0) | ISNULL(1) | ISNULL(1.1) | ISNULL('') | ISNULL('bee') | ISNULL(NULL) |
+-----------+-----------+-------------+------------+---------------+--------------+
| 0         | 0         | 0           | 0          | 0             | 1            |
+-----------+-----------+-------------+------------+---------------+--------------+
```

# Функция IF()

Функция `IF()` работает как и во многих других языках программирования по формуле "если-то-иначе" и принимает три аргумента:

* `condition` - условное выражение
* `value1` - произвольное значение 
* `value2` - произвольное значение

Результатом запроса:

```
SELECT IF(1 > 0, 'bee', 'geek'),
       IF(1 < 0, 'bee', 'geek');
```

будет:

```
+--------------------------+--------------------------+
| IF(1 > 0, 'bee', 'geek') | IF(1 < 0, 'bee', 'geek') |
+--------------------------+--------------------------+
| bee                      | geek                     |
+--------------------------+--------------------------+
```


# Функция COALESCE()

Функция `COALESCE()` находит первое не `NULL` значение. Принимает переменное количество аргументов и возвращает первый из них, не равный `NULL`

К примеру в предпоследнем задании модуля если `name` и `surname` являются `NULL` нужно указать `Uknown` это и будет первое не `NULL` значение если все остальные записи имеют `NULL`

# Функция IFNULL()

Функция `IFNULL()` используется для замены некоторого значения на альтернативное, если исходное значение равняется `NULL`. Принимает два аргумента в следующем порядке:

* `value` - исходное значение
* `alternative_value` - альтернативное значение

Результатом запроса:

```
SELECT IFNULL(NULL, 'geek'),
       IFNULL('bee', 'geek');
```

будет:

```
+----------------------+-----------------------+
| IFNULL(NULL, 'geek') | IFNULL('bee', 'geek') |
+----------------------+-----------------------+
| geek                 | bee                   |
+----------------------+-----------------------+
```

# Функция NULLIF()

Функция `NULLIF()` используется для сравнения двух значений. Принимает два аргумента в следующем порядке:

* `value1` - произвольное значение
* `value2` - произвольное значение 

Функция возвращает `NULL`, если значения `value1` и `value2` совпадают, если не совпадают возвращает значение `value1`.

Результатом запроса:

```
SELECT NULLIF('bee', 'bee'),
       NULLIF('bee', 'geek');
```

будет:

```
+----------------------+-----------------------+
| NULLIF('bee', 'bee') | NULLIF('bee', 'geek') |
+----------------------+-----------------------+
| NULL                 | bee                   |
+----------------------+-----------------------+
```

# Функции CONVERT() и CAST()

Во время выполнения операции со значениями разных типов происходит автоматическое приведение этих значений к одному типу.
Например, при попытке сложить число и строку СУБД сначала конвертирует прибавляемую строку в число.

Результатом запроса:

```
SELECT 1 + '15';
```

будет:

```
+----------+
| 1 + '15' |
+----------+
| 16.0     |
+----------+
```

Но не все СУБД могут автоматически привести используемые значения к нужному типу данных для корректного выполнения операции, поэтому иногда приходится делать это вручную. В SQL для преобразования типов используются функции `CONVERT()` и `CAST()` 

Функция `CONVERT()` принимает два аргумента в следующем порядке:

* `value` - значение, которое необходимо преобразовать
* `type` - желаемый тип

Функция приводит значение `value` к типу `type` и возвращает полученный результат.

Результатом запроса:

```
SELECT CONVERT(100.78, DECIMAL(4, 1)),
       CONVERT(100.78, DECIMAL(3, 0));
```

будет:

```
+--------------------------------+--------------------------------+
| CONVERT(100.78, DECIMAL(4, 1)) | CONVERT(100.78, DECIMAL(3, 0)) |
+--------------------------------+--------------------------------+
| 100.8                          | 101                            |
+--------------------------------+--------------------------------+
```

Значение, приводимое к определенному типу, должно соответствовать формату этого типа, в противном случае функция `CONVERT()` вернет значение `NULL`.

Результатом запроса:

```
SELECT CONVERT('2023-01-01', DATE),
       CONVERT('beegeek', DATE);
```

будет:

```
+-----------------------------+--------------------------+
| CONVERT('2023-01-01', DATE) | CONVERT('beegeek', DATE) |
+-----------------------------+--------------------------+
| 2023-01-01                  | NULL                     |
+-----------------------------+--------------------------+
```

Но при попытке привести несоответствующее формату значение к числовому типу функция `CONVERT()` вернет значение `0`.

Результатом запроса:

```
SELECT CONVERT('beegeek', SIGNED),
       CONVERT('beegeek', UNSIGNED),
       CONVERT('beegeek', DECIMAL(5, 2));
```

будет:

```
+----------------------------+------------------------------+-----------------------------------+
| CONVERT('beegeek', SIGNED) | CONVERT('beegeek', UNSIGNED) | CONVERT('beegeek', DECIMAL(5, 2)) |
+----------------------------+------------------------------+-----------------------------------+
| 0                          | 0                            | 0.00                              |
+----------------------------+------------------------------+-----------------------------------+
```

Похожим образом себя ведет и `CAST()` за исключением того что вместо запятой используется `AS`.

Результатом запроса:

```
SELECT CAST(100.78 AS DECIMAL(4, 1)),
       CAST(100.78 AS DECIMAL(3, 0));
```

будет:

```
+-------------------------------+-------------------------------+
| CAST(100.78 AS DECIMAL(4, 1)) | CAST(100.78 AS DECIMAL(3, 0)) |
+-------------------------------+-------------------------------+
| 100.8                         | 101                           |
+-------------------------------+-------------------------------+
```

#### Примечание 1. 

Практическое применение функции `NULLIF()` на первый взгляд недостаточно очевидно. Одним из примеров ее использования является реализация безопасного деления путем замены делителя на значение `NULL`, если тот равен нулю:

```
<делимое> / NULLIF(<делитель>, 0)
```

Если делитель не равен нулю, функция `NULLIF()` вернет его в исходном виде. Если же делитель равен нулю, функция вернет значение `NULL`, и результатом деления будет `NULL`.

#### Примечание 2. 

Использование функции `COALESCE()` считается хорошим тоном по сравнению с функцией `NULLIF()`, хоть они и выполняют одну и ту же функцию, но `COALESCE()` может обрабатывать переменное количество аргументов в отличие от `NULLIF()` которая отрабатывает только два аргумента.