# Функции даты и времени Часть 3

# Функции ADDDATE() и SUBDATE()

Функция `ADDDATE()` используется для прибавление временного интервала к дате и времени и принимает в качестве аргумента следующие значения:

* `datetime` - дата и время
* `interval` - временной интервал

Функция прибавляет временной интервал `interval` к дате и времени `datetime` и возвращает полученный результат.

Результатом запроса:

```
SELECT ADDDATE('2023-10-20 07:30:00', INTERVAL 4 DAY),
       ADDDATE('2023-10-20 07:30:00', INTERVAL 4 HOUR);
```

будет:

```
+------------------------------------------------+-------------------------------------------------+
| ADDDATE('2023-10-20 07:30:00', INTERVAL 4 DAY) | ADDDATE('2023-10-20 07:30:00', INTERVAL 4 HOUR) |
+------------------------------------------------+-------------------------------------------------+
| 2023-10-24 07:30:00                            | 2023-10-20 11:30:00                             |
+------------------------------------------------+-------------------------------------------------+
```

Похожим образом ведет себя функция `SUBDATE()` только она вычитает интервал из даты и времени а не прибавляет его.

Результатом запроса:

```
SELECT SUBDATE('2023-10-20 07:30:00', INTERVAL 4 DAY),
       SUBDATE('2023-10-20 07:30:00', INTERVAL 4 HOUR);
```

будет:

```
+------------------------------------------------+-------------------------------------------------+
| SUBDATE('2023-10-20 07:30:00', INTERVAL 4 DAY) | SUBDATE('2023-10-20 07:30:00', INTERVAL 4 HOUR) |
+------------------------------------------------+-------------------------------------------------+
| 2023-10-16 07:30:00                            | 2023-10-20 03:30:00                             |
+------------------------------------------------+-------------------------------------------------+
```

Функции `ADDDATE()` и `SUBDATE()` в качестве первого аргумента могут принимать не только дату и время, но и просто дату.

Результатом запроса:

```
SELECT ADDDATE('2023-10-20', INTERVAL 4 DAY),
       SUBDATE('2023-10-20', INTERVAL 24 HOUR);
```

будет:

```
+---------------------------------------+-----------------------------------------+
| ADDDATE('2023-10-20', INTERVAL 4 DAY) | SUBDATE('2023-10-20', INTERVAL 24 HOUR) |
+---------------------------------------+-----------------------------------------+
| 2023-10-24                            | 2023-10-19 00:00:00                     |
+---------------------------------------+-----------------------------------------+
```

# Функции ADDTIME() и SUBTIME()

Функция `ADDTIME()` используется для прибавления временного значения к дате и времени. Принимает два аргумента в следующем порядке:

* `datetime` - дата и время
* `time` - время

Функция прибавляет временное значение `time` к дате и времени `datetime` и возвращает полученный результат.

Результатом запроса:

```
SELECT ADDTIME('2023-10-20 21:00:00', '02:00:00'),
       ADDTIME('2023-10-20 21:00:00', '06:00:00');
```

будет:

```
+--------------------------------------------+--------------------------------------------+
| ADDTIME('2023-10-20 21:00:00', '02:00:00') | ADDTIME('2023-10-20 21:00:00', '06:00:00') |
+--------------------------------------------+--------------------------------------------+
| 2023-10-20 23:00:00                        | 2023-10-21 03:00:00                        |
+--------------------------------------------+--------------------------------------------+
```

Похожим образом работает и `SUBTIME()` за исключением того что она вычитает время из даты и времени.

Результатом запроса:

```
SELECT SUBTIME('2023-10-20 21:00:00', '02:00:00'),
       SUBTIME('2023-10-20 21:00:00', '06:00:00');
```

будет:

```
+--------------------------------------------+--------------------------------------------+
| SUBTIME('2023-10-20 21:00:00', '02:00:00') | SUBTIME('2023-10-20 21:00:00', '06:00:00') |
+--------------------------------------------+--------------------------------------------+
| 2023-10-20 19:00:00                        | 2023-10-20 15:00:00                        |
+--------------------------------------------+--------------------------------------------+
```

Функции `ADDTIME()` и `SUBTIME()` в качестве аргумента могут принимать не только дату и время, но и просто время.

Результатом запроса:

```
SELECT ADDTIME('21:30:00', '08:30:00'),
       SUBTIME('20:40:00', '10:00:00');
```

будет:

```
+---------------------------------+---------------------------------+
| ADDTIME('21:30:00', '08:30:00') | SUBTIME('20:40:00', '10:00:00') |
+---------------------------------+---------------------------------+
| 30:00:00                        | 10:40:00                        |
+---------------------------------+---------------------------------+
```

Если первое временное значение меньше второго, функция `ADDTIME()` вернет отрицательный результат:

Результатом запроса:

```
SELECT SUBTIME('20:00:00', '30:00:00');
```

будет:

```
+---------------------------------+
| SUBTIME('20:00:00', '30:00:00') |
+---------------------------------+
| -10:00:00                       |
+---------------------------------+
```

# Функция DATEDIFF()

Функция `DATEDIFF()` используется для вычисления разницы между двумя значениями даты и времени. Она принимает следующие значения:

* `datetime1` - первая дата и время
* `datetime2` - вторая дата и время

Функция возвращает количество дней между значениями даты и времени `datetime1` и `datetime2` 

Результатом запроса:

```
SELECT DATEDIFF('2023-10-20 07:30:00', '2023-10-20 8:00:00'),
       DATEDIFF('2023-10-26 07:30:00', '2023-10-20 8:00:00');
```

будет:

```
+-------------------------------------------------------+-------------------------------------------------------+
| DATEDIFF('2023-10-20 07:30:00', '2023-10-20 8:00:00') | DATEDIFF('2023-10-26 07:30:00', '2023-10-20 8:00:00') |
+-------------------------------------------------------+-------------------------------------------------------+
| 0                                                     | 6                                                     |
+-------------------------------------------------------+-------------------------------------------------------+
```

Если первая дата и время **меньше** второй, функция `DATEDIFF()` вернет отрицательный результат.

Результатом запроса:

```
SELECT DATEDIFF('2023-10-20 07:30:00', '2023-10-26 08:00:00');
```

будет:

```
+--------------------------------------------------------+
| DATEDIFF('2023-10-20 07:30:00', '2023-10-26 08:00:00') |
+--------------------------------------------------------+
| -6                                                     |
+--------------------------------------------------------+
```

<kbd>
<div style="display:flex; align-items:center;">
<img src= "../bee.png" alt="пчелыч" style="width:50px; height:50px; margin-right:20px;">
<p>
При вычислении разницы функция DATEDIFF() использует только дату, время не используется. Поэтому каждый аргумент передаваемый в функцию, может быть как датой и временем так и просто датой
</p>
</div>
</kbd>

# Функция TIMEDIFF()

Функция `TIMEDIFF()` используется для вычисления разницы во времени между двумя значениями даты и времени. Она принимает следующие значения:

* `datetime1` - первая дата и время
* `datetime2` - вторая дата и время

Результатом запроса:

```
SELECT TIMEDIFF('2023-10-20 9:00:00', '2023-10-20 07:00:00'),
       TIMEDIFF('2023-10-25 9:00:00', '2023-10-20 07:00:00');
```

будет:

```
+-------------------------------------------------------+-------------------------------------------------------+
| TIMEDIFF('2023-10-20 9:00:00', '2023-10-20 07:00:00') | TIMEDIFF('2023-10-25 9:00:00', '2023-10-20 07:00:00') |
+-------------------------------------------------------+-------------------------------------------------------+
| 02:00:00                                              | 122:00:00                                             |
+-------------------------------------------------------+-------------------------------------------------------+
```

Если первая дата и время, **меньше** второй, функция `TIMEDIFF()` вернет отрицательное значение.

Результатом запроса:

```
SELECT TIMEDIFF('2023-10-20 7:00:00', '2023-10-20 9:00:00');
```

будет:

```
+------------------------------------------------------+
| TIMEDIFF('2023-10-20 7:00:00', '2023-10-20 9:00:00') |
+------------------------------------------------------+
| -02:00:00                                            |
+------------------------------------------------------+
```

Функция `TIMEDIFF()` может использоваться для вычисления разницы между двумя временными значениями.

Результатом запроса:

```
SELECT TIMEDIFF('7:00:00', '15:00:00'),
       TIMEDIFF('16:00:00', '11:00:00');
```

будет:

```
+---------------------------------+----------------------------------+
| TIMEDIFF('7:00:00', '15:00:00') | TIMEDIFF('16:00:00', '11:00:00') |
+---------------------------------+----------------------------------+
| -08:00:00                       | 05:00:00                         |
+---------------------------------+----------------------------------+
```

# Функция TIMESTAMPDIFF()

Функция `TIMESTAMPDIFF()` используется для вычисления разницы между двумя значениями даты и времени в определенных единицах измерения. Принимает три аргумента в следующем порядке:

* `unit` - единица измерения, в которой требуется получить разницу 
* `datetime1` - первая дата и время
* `datetime2` - вторая дата и время

Результатом запроса:

```
SELECT TIMESTAMPDIFF(HOUR, '2023-10-20 07:00:00', '2023-10-20 12:00:00') AS hours,
       TIMESTAMPDIFF(MONTH, '2023-10-20 07:00:00', '2023-12-31 12:00:00') AS months;
```

будет:

```
+-------+--------+
| hours | months |
+-------+--------+
| 5     | 2      |
+-------+--------+
```

Если первое значение даты и времени **больше** второго, функция `TIMESTAMPDIFF()` вернет отрицательный результат.

Результатом запроса:

```
SELECT TIMESTAMPDIFF(HOUR, '2023-10-20 12:00:00', '2023-10-20 07:00:00');
```

будет:

```
+-------------------------------------------------------------------+
| TIMESTAMPDIFF(HOUR, '2023-10-20 12:00:00', '2023-10-20 07:00:00') |
+-------------------------------------------------------------------+
| -5                                                                |
+-------------------------------------------------------------------+
```

Единица измерения, передаваемая в функцию `TIMESTAMPDIFF()` в качестве первого аргумента, должна быть одиночной, в противном случае произойдет ошибка.

<kbd>
<div style="display:flex; align-items:center;">
<img src= "../bee.png" alt="пчелыч" style="width:50px; height:50px; margin-right:20px;">
<p>
Каждый из аргументов передаваемый в функцию TIMESTAMPDIFF(), может быть как датой и временем, так и просто датой. При этом дата имеет нулевые значения по всем компонентам времени.
</p>
</div>
</kbd>

# Функция TIMESTAMP()

Функция `TIMESTAMP()` используется для объединения даты и временного значения. В качестве аргумента принимает два значения в следующем порядке:

* `data` - дата
* `timestamp` - временное значение

Результатом запроса:

```
SELECT TIMESTAMP('2023-10-20', '08:00'),
       TIMESTAMP('2023-10-20', '28:00');
```

будет:

```
+----------------------------------+----------------------------------+
| TIMESTAMP('2023-10-20', '08:00') | TIMESTAMP('2023-10-20', '28:00') |
+----------------------------------+----------------------------------+
| 2023-10-20 08:00:00              | 2023-10-21 04:00:00              |
+----------------------------------+----------------------------------+
```

Функция `TIMESTAMP()` автоматически конвертирует каждые `24` часа в `1` день. 

Временное значение может не указываться, в таком случае оно будет принято равным `00:00:00`

Результатом запроса:

```
SELECT TIMESTAMP('2023-10-20');
```

будет:

```
+-------------------------+
| TIMESTAMP('2023-10-20') |
+-------------------------+
| 2023-10-20 00:00:00     |
+-------------------------+
```

#### Примечание 1. 

Если любой из функций, перечисленных здесь, передать значение `NULL` в любом порядке - функции вернут `NULL`