# 4.2 Текстовые функции Часть 2

# Функция LEFT()

Функция `LEFT()` используется для извлечения определенного количества символов из начала строки. Она принимает два аргумента в следующем порядке:

* `str` - исходная строка;
* `count` - количество извлекаемых символов;

Функция возвращает строку, состояющую из первых `count` символов строки `str`. 

Результатом запроса:

```
SELECT LEFT('beegeek', 1),
       LEFT('beegeek', 3),
       LEFT('beegeek', 7);
```

будет:

```
+--------------------+--------------------+--------------------+
| LEFT('beegeek', 1) | LEFT('beegeek', 3) | LEFT('beegeek', 7) |
+--------------------+--------------------+--------------------+
| b                  | bee                | beegeek            |
+--------------------+--------------------+--------------------+
```

Если количество извлекаемых символов меньше `1`, функция `LEFT()` вернет пустую строку.

Результатом запроса:

```
SELECT LEFT('beegeek', 0),
       LEFT('beegeek', -1);
```

будет:

```
+--------------------+---------------------+
| LEFT('beegeek', 0) | LEFT('beegeek', -1) |
+--------------------+---------------------+
|                    |                     |
+--------------------+---------------------+
```

Если количество извлекаемых символов больше строки, функция `LEFT()` вернет всю строку.

Результатом запроса:

```
SELECT LEFT('beegeek', 50),
       LEFT('beegeek', 100);
```

будет:

```
+---------------------+----------------------+
| LEFT('beegeek', 50) | LEFT('beegeek', 100) |
+---------------------+----------------------+
| beegeek             | beegeek              |
+---------------------+----------------------+
```

# Функция RIGHT()

Аналогична функции `LEFT()` но символы извлекаются с конца строки, также принимает в качестве аргумента два значения:

* `str` - исходная строка;
* `count` - количество извлекаемых символов;

Результатом запроса:

```
SELECT RIGHT('beegeek', 1),
       RIGHT('beegeek', 3),
       RIGHT('beegeek', 7);
```

будет:

```
+---------------------+---------------------+---------------------+
| RIGHT('beegeek', 1) | RIGHT('beegeek', 3) | RIGHT('beegeek', 7) |
+---------------------+---------------------+---------------------+
| k                   | eek                 | beegeek             |
+---------------------+---------------------+---------------------+
```

Собственно аналогично функции `LEFT()` при превышении количества символов в строке вернет строку целиком, если количество символов меньше `1` вернет пустую строку.

# Функция LOCATE()

Функция `LOCATE()` используется для нахождения подстроки в строке. Она принимает три аргумента в следующем порядке:

* `substr` - искомая подстрока;
* `str` - исходная строка;
* `start` - позиция начала поиска(может не указываться, в таком случае поиск будет осуществляться с начала строки);

Функция выполняет поиск подстроки `substr` в строке `str`, начиная с позиции `start`, и возвращает позицию ее первого вхождения.

Результатом запроса:

```
SELECT LOCATE('e', 'beegeek'),
       LOCATE('g', 'beegeek'),
       LOCATE('eg', 'beegeek'),
       LOCATE('geek', 'beegeek');
```

будет:

```
+------------------------+------------------------+-------------------------+---------------------------+
| LOCATE('e', 'beegeek') | LOCATE('g', 'beegeek') | LOCATE('eg', 'beegeek') | LOCATE('geek', 'beegeek') |
+------------------------+------------------------+-------------------------+---------------------------+
| 2                      | 4                      | 3                       | 4                         |
+------------------------+------------------------+-------------------------+---------------------------+
```

**При использовании функции** `LOCATE()` **символы исходной строки нумеруются с** `1` а не с `0`.

Результатом запроса:

```
SELECT LOCATE('e', 'beegeek', 2),
       LOCATE('e', 'beegeek', 4);
```

будет:

```
+---------------------------+---------------------------+
| LOCATE('e', 'beegeek', 2) | LOCATE('e', 'beegeek', 4) |
+---------------------------+---------------------------+
| 2                         | 5                         |
+---------------------------+---------------------------+
```

**Функция** `LOCATE()` **осуществляет поиск позиции подстроки без учета регистра.**

Результатом запроса:

```
SELECT LOCATE('E', 'beegeek'),
       LOCATE('GEEK', 'beegeek');
```

будет:

```
+------------------------+---------------------------+
| LOCATE('E', 'beegeek') | LOCATE('GEEK', 'beegeek') |
+------------------------+---------------------------+
| 2                      | 4                         |
+------------------------+---------------------------+
```

**Если искомой подстроки не окажется в строке, функция** `LOCATE()` вернет значение `0`.

Результатом запроса:

```
SELECT LOCATE('a', 'beegeek'),
       LOCATE('eb', 'beegeek');
```

будет:

```
+------------------------+-------------------------+
| LOCATE('a', 'beegeek') | LOCATE('eb', 'beegeek') |
+------------------------+-------------------------+
| 0                      | 0                       |
+------------------------+-------------------------+
```

# Функция REPLACE()

Функция `REPLACE()` используется для замены подстроки в строке. Она принимает три аргумента в следующем порядке:

* `str` - исходная строка;
* `from_str` - заменяемая подстрока;
* `to_str` - заменяющая подстрока;

Функция заменяет все вхождения подстроки `from_str` в строке `str` на заменяющую подстроку `to_str` и возвращает полученный результат.

Результатом запроса:

```
SELECT REPLACE('beegeek', 'e', 'i'),
       REPLACE('beegeek', 'geek', 'g'),
       REPLACE('beegeek', 'geek', 'Geek');
```

будет:

```
+------------------------------+---------------------------------+------------------------------------+
| REPLACE('beegeek', 'e', 'i') | REPLACE('beegeek', 'geek', 'g') | REPLACE('beegeek', 'geek', 'Geek') |
+------------------------------+---------------------------------+------------------------------------+
| biigiik                      | beeg                            | beeGeek                            |
+------------------------------+---------------------------------+------------------------------------+
```

**Если заменяемой подстроки нет в строке, функция** `REPLACE()` вернет строку в исходном виде.

Результатом запроса:

```
SELECT REPLACE('beegeek', 'a', 'i'),
       REPLACE('beegeek', 'keeg', 'Keeg');
```

будет:

```
+------------------------------+------------------------------------+
| REPLACE('beegeek', 'a', 'i') | REPLACE('beegeek', 'keeg', 'Keeg') |
+------------------------------+------------------------------------+
| beegeek                      | beegeek                            |
+------------------------------+------------------------------------+
```

В отличии от функции `LOCATE()`, функция `REPLACE()` выполняет замену с учетом регистра.

Результатом запроса:

```
SELECT REPLACE('beegeek', 'B', 'BBB'),
       REPLACE('beegeek', 'b', 'bbb');
```

является:

```
+--------------------------------+--------------------------------+
| REPLACE('beegeek', 'B', 'BBB') | REPLACE('beegeek', 'b', 'bbb') |
+--------------------------------+--------------------------------+
| beegeek                        | bbbeegeek                      |
+--------------------------------+--------------------------------+
```
